@page "/restaurants"
@using System.Net.Http.Json

@inject HttpClient HttpClient

<MudTable Items="@restaurants">
    <ToolBarContent>
        <MudText Typo="Typo.h6">Restaurants</MudText>
    </ToolBarContent>
    <HeaderContent>
        <MudTh>Id</MudTh>
        <MudTh>Name</MudTh>
        <MudTh></MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd>@context.Id</MudTd>
        <MudTd>@context.Name</MudTd>
        <MudTd>
            <MudIconButton Icon="@Icons.Material.Filled.Edit"></MudIconButton>
            <MudIconButton Icon="@Icons.Material.Filled.Delete" Color="Color.Error"></MudIconButton>
        </MudTd>
    </RowTemplate>
    <PagerContent>
        <MudTablePager />
    </PagerContent>
</MudTable>

@code {
    private List<Restaurant> restaurants = new();

    protected override async Task OnInitializedAsync()
    {
        var response = await HttpClient.GetFromJsonAsync<Restaurant[]>("http://localhost:5101/api/restaurant");

        restaurants = response?.ToList() ?? restaurants;
    }
}